{% extends "layout.html" %}
{% block content %}
	<div class="past_shows_title">
		{% if manage_shows is defined %}
			<h2>Edit Past Shows</h2>
			<button type="button" onclick="window.location.href='/members/edit-show/new'">Add New Show</button>
		{% else %}
			<h2>Past Shows</h2>
		{% endif %}

		<span>
			<div class="fancy-input">
				<input type="text" name="quick-search" id="quick-search" placeholder=" " oninput="quickSearch(this)">
				<label for="quick-search">Quick Search</label>
			</div>
		</span>

		<label class="cards_switch">
			Table
			<div class="switch">
				<input checked type="checkbox" onchange="cssToggle(event,'past_shows','cards_mode','table_mode')">
				<span class="slider round"></span>
			</div>
			Cards
		</label>
	</div>

	<table id="past_shows" class="cards_mode">
		<tr id="header">
			<th>dateIndex</th>
			<th></th>
			<th onclick="sortTable('past_shows', 2, 'show_arrow')">Show <span id="show_arrow">▼</span></th>
			<th onclick="sortTable('past_shows', 0, 'season_arrow')">Season <span id="season_arrow" class="asc">▼</span></th>
			<th onclick="sortTable('past_shows', 4, 'genre_arrow')">Genre <span id="genre_arrow">▼</span></th>
		</tr>

		{% for show in shows %}
			{% if manage_shows is defined %}
				{% set url = "/members/edit-show/" + show.id %}
			{% else %}
				{% set url = "/past-shows/" + show.id %}
			{% endif %}
			<tr class="link" id="{{ show.id }}" onclick="location.href='{{ url }}'"
				data-searchable="{{ show.title }} {{ show.season }} {{ show.date.year }} {{ show.genre }} {{ show.author }} {{ show.subtitle }}">
				<td>{{ '%04d' % loop.index0 }}</td>
				<td><img class="programme" src="{{ show.programme }}" alt="{{ show.title }} programme cover"></td>
				<td class="title"><h3>{{ show.title }}</h3></td>
				<td class="season">{{ show.season }} {{ show.date.year }}</td>
				<td class="genre">{{ show.genre }}</td>
			</tr>
		{% endfor %}
	</table>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			sortTable('past_shows', 0, "season_arrow")
			sortTable('past_shows', 0, "season_arrow")
		}, false)
	</script>
{% endblock %}